# 需求文档

## 简介

本文档定义了 Gemini Chat 应用的 UI 改进需求（第二版）。主要改进包括：主题色调整为薄荷绿、设置面板毛玻璃效果、修复设置按钮点击问题、简化聊天区域布局、优化输入框区域、添加 Gemini 图标、思考程度按钮仅对支持的模型显示、以及添加流式/非流式开关。

## 术语表

- **薄荷绿（Mint Green）**: 一种淡淡的浅绿色，带有清新薄荷感的颜色
- **毛玻璃效果（Frosted Glass Effect）**: 使用 CSS backdrop-filter 实现的半透明模糊背景效果
- **流式输出（Streaming）**: AI 响应逐字逐句实时显示的模式
- **非流式输出（Non-Streaming）**: AI 响应完整生成后一次性显示的模式
- **思考程度（Thinking Level）**: Gemini 3 Pro 模型特有的推理深度参数
- **程序（Program）**: 原"对话"的新名称，代表一个独立的聊天窗口

## 需求

### 需求 1：主题色调整为薄荷绿

**用户故事：** 作为用户，我希望应用使用淡淡的薄荷绿作为主题色，让界面看起来更清新舒适。

#### 验收标准

1. THE 设计系统 SHALL 将主色调从蓝色更改为薄荷绿色系
2. THE 薄荷绿色系 SHALL 包含从浅到深的完整色阶（50-900）
3. WHEN 应用加载完成 THEN 所有使用主色的 UI 元素 SHALL 显示薄荷绿色
4. THE 左侧导航栏背景 SHALL 使用薄荷绿主色
5. THE 按钮、链接、高亮等交互元素 SHALL 使用薄荷绿色系

### 需求 2：设置面板毛玻璃效果

**用户故事：** 作为用户，我希望设置面板具有毛玻璃效果，让界面看起来更现代精致。

#### 验收标准

1. WHEN 用户点击设置按钮 THEN 系统 SHALL 弹出带有毛玻璃效果的设置面板
2. THE 设置面板 SHALL 使用 backdrop-filter: blur() 实现毛玻璃效果
3. THE 设置面板背景 SHALL 使用半透明颜色配合模糊效果
4. THE 设置面板 SHALL 以模态弹窗形式显示，而非侧边栏内嵌
5. WHEN 用户点击设置面板外部区域 THEN 系统 SHALL 关闭设置面板

### 需求 3：修复设置按钮点击问题

**用户故事：** 作为用户，我希望点击左侧工具栏的设置按钮能够正常弹出设置页面。

#### 验收标准

1. WHEN 用户点击左侧导航栏的设置图标 THEN 系统 SHALL 弹出设置面板
2. THE 设置按钮 SHALL 具有正确的点击事件绑定
3. THE 设置按钮 SHALL 在点击时提供视觉反馈
4. IF 设置面板已打开 THEN 再次点击设置按钮 SHALL 关闭设置面板

### 需求 4：术语更改 - 对话改为程序

**用户故事：** 作为用户，我希望"新建对话"改为"新建程序"，让命名更符合我的使用场景。

#### 验收标准

1. THE 侧边栏按钮文字 SHALL 从"新建对话"更改为"新建程序"
2. THE 空状态提示 SHALL 使用"程序"替代"对话"
3. THE 侧边栏底部统计 SHALL 显示"X 个程序"而非"X 个对话"
4. THE 搜索占位符 SHALL 显示"搜索程序..."而非"搜索对话..."

### 需求 5：程序卡片显示使用的模型

**用户故事：** 作为用户，我希望在侧边栏的程序卡片上看到该程序使用的模型名称。

#### 验收标准

1. THE 程序卡片 SHALL 在右侧显示当前使用的模型名称标签
2. THE 模型标签 SHALL 使用不同颜色区分不同模型系列
3. THE 模型标签 SHALL 显示简短的模型名称（如 "3 Pro"、"2 Flash"）
4. WHEN 程序配置的模型变更 THEN 卡片上的模型标签 SHALL 实时更新

### 需求 6：简化聊天区域顶部布局

**用户故事：** 作为用户，我希望聊天区域顶部更简洁，不需要重复显示模型选择器。

#### 验收标准

1. THE 聊天区域顶部 SHALL 移除模型选择下拉菜单
2. THE 聊天区域顶部 SHALL 移除配置状态标签（思考程度、图片参数）
3. THE 聊天区域顶部 SHALL 仅保留右上角的设置按钮
4. WHEN 用户点击右上角设置按钮 THEN 系统 SHALL 弹出毛玻璃效果的配置面板
5. THE 配置面板 SHALL 包含模型选择、参数调整等所有配置选项

### 需求 7：优化聊天区域底部布局

**用户故事：** 作为用户，我希望输入框区域更紧凑，工具栏放在输入框下方，减少空白。

#### 验收标准

1. THE 输入框下方空白 SHALL 减少到最小必要间距
2. THE 工具栏（思考、图片、链接、联网等） SHALL 移动到输入框下方
3. THE 工具栏 SHALL 与输入框紧密排列，形成一个整体
4. THE 整个输入区域 SHALL 位于聊天区域最底部，仅保留少量边距
5. THE 模型参数栏 SHALL 从输入框上方移除

### 需求 8：使用 Gemini 图标

**用户故事：** 作为用户，我希望"开始新对话"的图标使用 Gemini 的官方图标。

#### 验收标准

1. THE 空状态区域的图标 SHALL 使用 Gemini 官方星形图标
2. THE Gemini 图标 SHALL 使用 SVG 格式以保证清晰度
3. THE 图标颜色 SHALL 与主题色（薄荷绿）协调

### 需求 9：思考程度按钮仅对支持的模型显示

**用户故事：** 作为用户，我希望思考程度选择器只在使用 Gemini 3 Pro 模型时显示。

#### 验收标准

1. WHEN 当前模型为 Gemini 3 Pro 系列 THEN 系统 SHALL 显示思考程度选择器
2. WHEN 当前模型不支持思考功能 THEN 系统 SHALL 隐藏思考程度选择器
3. THE 模型能力检测 SHALL 基于模型配置中的 supportsThinking 属性
4. WHEN 用户切换到不支持思考的模型 THEN 思考程度选择器 SHALL 立即隐藏

### 需求 10：添加流式/非流式输出开关

**用户故事：** 作为用户，我希望能够选择 AI 响应是流式输出还是一次性输出。

#### 验收标准

1. THE 设置面板 SHALL 包含流式/非流式输出的开关选项
2. THE 开关 SHALL 清晰标注"流式输出"和"非流式输出"的含义
3. WHEN 用户选择流式输出 THEN AI 响应 SHALL 逐字逐句实时显示
4. WHEN 用户选择非流式输出 THEN AI 响应 SHALL 完整生成后一次性显示
5. THE 流式设置 SHALL 持久化存储到本地
6. THE 默认设置 SHALL 为流式输出

